<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://kit.fontawesome.com/d82fdbf1c7.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <title>Document</title>
</head>

<body>
    <div id="app">
        <!-- !! HEADER -->
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container">
                    <div class="brand"> Scuffed<span>&#45;</span>Flow <span>&#62; &#62;</span></div>
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item" v-if="currentUser.username == undefined">
                            <a class="nav-link" href="#signup" @click.prevent="showloginsignup">
                                Login <span>&#47;</span> Signup <i class="fa fa-user"></i></a>
                        </li>
                        <li class="nav-item" v-else="currentUser.username">
                            <a class="nav-link" href="/logout">Logout <i class="fa fa-user"></i></a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- !! END OF HEADER -->
        <!-- !! MAIN -->
<main>
        <div class="container">
            <div class="row">
                <!-- * CREATE POST START -->
                <div class="col-sm-12 col-md-4 pt-4">
                    <div class="createPost_container">
                        <h2 class="title_big pb-2">
                            <span v-if="currentUser.username == undefined">Guest</span>
                            <span v-else="currentUser.username">{{ currentUser.username }}</span>
                        </h2>
                        <h3 class="title_mini">
                            <span v-if="currentUser.username == undefined">Login to ask.</span>
                            <span v-else="currentUser.username">{{ currentUser.userType }}</span>
                        </h3>
                    </div>
                    <form id="createPost">
                        <div class="input-container">
                            <label class="label">Title</label>
                            <input id="postTitle" class="form-control" type="text" name="title" placeholder="Title..">
                        </div>
                        <div class="input-container form-group">
                            <label class="label " for="postCategory">Chose a category: </label>
                            <select name="category" class="form-control" id="postCategory">
                                <option value="Databases">Databases</option>
                                <option value="Algorithms">Algorithms</option>
                                <option value="Webb">Webb</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-container">
                            <label name="body" class="label">Content</label>
                            <textarea name="reply" id="postBody" class="form-control" rows="3"
                                placeholder="What do you need help with?.."></textarea>
                        </div>
                        <button v-on:click="createPost" type="button"  class="btn btn-white">Create post</button>
                    </form>
                    <!--  HERE -->

                    <div class="parent-FAQ pt-3">
                        <i class="fas fa-angle-double-down FAQ-icon container-icon"></i>
                        <div class = "FAQ hideScroll">

                            <div class="post-container FAQ-post-Container">
                                <i class="fas fa-question post-container-icon"></i>
                                <div class="post-header d-flex justify-content-between align-items-center">
                                    <h5>FAQ: Help with Databases needed!</h5>
                                </div>
                                <div class="post-body d-flex justify-content-between align-items-center">
                                    <p>You're having problem with connecting to the database you're trying to connect to?</p>
                                </div>
                            </div>
                            <div class="post-container FAQ-post-Container">
                                <i class="fas fa-question post-container-icon"></i>
                                <div class="post-header d-flex justify-content-between align-items-center">
                                    <h5>FAQ: Help with Webb needed!</h5>
                                </div>
                                <div class="post-body d-flex justify-content-between align-items-center">
                                    <p>You're having problem with HTML/CSS?
                                        First of all. Try with a different method, and after that, learn how
                                        to use google efficiently.
                                    </p>
                                </div>
                            </div>
                            <div class="post-container FAQ-post-Container">
                                <i class="fas fa-question post-container-icon"></i>
                                <div class="post-header d-flex justify-content-between align-items-center">
                                    <h5>FAQ: Help with Algorithms needed!</h5>
                                </div>
                                <div class="post-body d-flex justify-content-between align-items-center">
                                    <p>Algorithms can be difficult at times, and I know it can be frustrating.
                                        But the easiest way to learn is to use google.
                                    </p>
                                </div>
                            </div>
                            <div class="post-container FAQ-post-Container">
                                <i class="fas fa-question post-container-icon"></i>
                                <div class="post-header d-flex justify-content-between align-items-center">
                                    <h5>FAQ: Help with [Insert topic] needed!</h5>
                                </div>
                                <div class="post-body d-flex justify-content-between align-items-center">
                                    <p>You're having trouble with [insert topic]?
                                        It can be frustrating at times, but the one most important thing to know
                                        is that when things get hard, you can learn a lot from your experience with tampering
                                        with the problem.
                                    </p>
                                </div>
                            </div>
                            
    
    
    
                            
                        </div>
                    </div>
                    

                </div>
                <!-- * CREATE POST END -->
                <div class="col-sm-12 col-md-8 pt-4">
                    <form class="d-flex justify-content-end">
                        <button v-if="currentUser.username" class="btn btn-white mr-1" type="button" v-on:click="sortByUser(currentUser.username)">My
                            Posts</button>
                        <button class="btn btn-white mr-1" type="button"
                            v-on:click="sortByCategory('Databases')">Databases</button>
                        <button class="btn btn-white mr-1" type="button"
                            v-on:click="sortByCategory('Algorithms')">Algorithms</button>
                        <button class="btn btn-white mr-1" type="button" v-on:click="sortByCategory('Webb')">Webb</button>
                        <button class="btn btn-white mr-1" type="button" v-on:click="sortByCategory('Other')">Other</button>
                        <button class="btn btn-white" type="button" v-on:click="showAll">View All</button>
                    </form>
                    <div class="pt-3">
                        <i class="fas fa-angle-double-down POST-icon container-icon"></i>
                        <div id="posts" class="hideScroll">
                            <!-- * POST -->
                            <div v-for="post in posts" v-bind:key="post.id" v-bind:class="post.isDuplicate == 0 ? 'post-container' : 'post-container duplicate'">
                                    <i v-if="post.category == 'Other'" class="fas fa-question post-container-icon"></i>
                                    <i v-else-if="post.category == 'Algorithms'" class="fas fa-square-root-alt post-container-icon"></i>
                                    <i v-else-if="post.category == 'Databases'" class="fas fa-database post-container-icon"></i>
                                    <i v-else="post.category == 'Webb'" class="fas fa-code post-container-icon"></i>
                                <div class="post-header d-flex justify-content-between align-items-center">
                                    <h5>{{ post.title }}</h5>
                                    <p>{{ post.username }}</p>
                                </div>
                                <div class="post-body d-flex justify-content-between align-items-center">
                                    <p>{{ post.body }}</p>
                                    <form class="post-like-container">
                                        <button type="button" class="btn" v-on:click="likePost(post.postID)"><i
                                                class="fas fa-thumbs-up"></i></button>
                                        <span>{{ post.likes }}</span>
                                        <button type="button" class="btn" v-on:click="dislikePost(post.postID)"><i
                                                class="fas fa-thumbs-down"></i></button>
                                    </form>
                                </div>
                                <div class="post-footer d-flex justify-content-between align-items-end">
                                    <span>{{ post.category }}<br>- {{ post.created }}</span>
                                    <form>
                                        <button v-if="currentUser.userType == 'Super Admin' || currentUser.userType == 'Contributor'" v-on:click="markAsDuplicate(post.postID)" class="btn btn-white" type="button" ><i class="fas fa-thumbtack"></i></button>
                                        <button v-if="currentUser.userType  == 'Super Admin'" v-on:click.prevent="showActionModal(post.username)" class="btn btn-white"><i
                                                class="fas fa-users-cog"></i></button>
                                        <button
                                            v-if="currentUser.userType == 'Super Admin' || currentUser.username == post.username"
                                            class="btn btn-white" v-on:click.prevent="showEditModal(post.postID)"><i
                                                class="fas fa-edit"></i></button>
                                        <button v-on:click.prevent="showReplyModal(post.postID)" class="btn btn-white"><i
                                                class="far fa-eye"></i> / <i class="fas fa-comment-dots"></i></button>
                                    </form>
                                </div>
                            </div>
                            <!-- Edit Modal -->
                            <div class="modal fade" id="editModal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <p class="modal-title">Edit Post <span>&#62; &#62;</span></p>
                                            <p class="m-0">ID: <span id="postID"></span></p>
                                        </div>
                                        <div class="modal-body">
                                            <div>
                                                <form class="form-horizontal" id="editPostForm">
                                                    <div class="input-container">
                                                        <label class="label">Title</label>
                                                        <input class="form-control editTitle" type="text"
                                                            name="editTitle">
                                                    </div>
                                                    <div class="input-container form-group">
                                                        <label class="label" for="editCategory">Chose a category:
                                                        </label>
                                                        <select name="category" class="form-control" id="editCategory">
                                                            <option value="Databases">Databases</option>
                                                            <option value="Algorithms">Algorithms</option>
                                                            <option value="Webb">Webb</option>
                                                            <option value="Other">Other</option>
                                                        </select>
                                                    </div>
                                                    <div class="input-container">
                                                        <label name="body" class="label">Body</label>
                                                        <textarea name="body-edit" id="bodyEdit" class="form-control"
                                                            rows="5"></textarea>
                                                    </div>
                                                    <button type="button" class="btn btn-white updatePost"
                                                        v-on:click="updatePost">Update</button>
                                                    <button type="button" class="btn btn-white delete-post"
                                                        v-on:click="removePost">Delete</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Reply Modal -->
                            <div class="modal fade" id="replyModal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="post-title"></h5>
                                            <p id="post-author"></p>
                                            <p id="post-id"></p>
                                        </div>
                                        <div class="modal-body">
                                            <!-- Post -->
                                            <p id="post-body"></p>
                                            <div>
                                                <div v-for="reply in replies">
                                                    <h5>{{reply.username}}</h5>

                                                    <div v-if="editMode == reply.replyID" class="test">
                                                        <textarea name="editReply" id="editReply" cols="60"
                                                            rows="5"></textarea>
                                                    </div>
                                                    <div v-else class="test">
                                                        <p class="replyBody">{{reply.reply}}</p>
                                                    </div>
                                                    <p id="replyID">{{reply.replyID}}</p>
                                                    <span> {{ reply.created }} </span>
                                                    <div id="replyButtons">
                                                        <button type="button" v-on:click="likeReply(reply.replyID)" class="btn"><i
                                                                class="fa fa-thumbs-up fa-lg"
                                                                aria-hidden="true"></i></button>
                                                        <button type="button" v-on:click="dislikeReply(reply.replyID)" class="btn"><i
                                                                class="fa fa-thumbs-down fa-lg"
                                                                aria-hidden="true"></i></button>
                                                        <span id="replyLikes">{{ reply.likes }}</span>
                                                    </div>
                                                    <div class="replyCrud">
                                                        <!-- ? This is where the fun begins! ? -->
                                                        <button type="button" class="removeReply btn btn-danger"
                                                            @click="removeReply(reply.replyID)"><i
                                                                class="fas fa-trash"></i></button>
                                                        <div v-if="editMode == reply.replyID">
                                                            <button type="button" class="editReply btn btn-white"
                                                                @click="updateReply(reply.replyID)"><i
                                                                    class="fas fa-save"></i></button>
                                                        </div>
                                                        <div v-else>
                                                            <button class="toggleReply btn btn-white"
                                                                @click="toggleEdit(reply.replyID)"><i
                                                                    class="fas fa-edit"></i></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Replies -->
                                            <div class="row">
                                                <div class="col-md-6 col-md-offset-3" v-if="currentUser.userType == 'Super Admin' || currentUser.userType == 'Contributor'">
                                                    <form id="replyForm">
                                                        <textarea name="reply" class="reply-body" cols="60"
                                                            rows="3"></textarea>
                                                        <button type="button" class="btn btn-white"
                                                            v-on:click="createReply">Submit</button>
                                                    </form>
                                                    <!-- v-on:click tassarna  -->
                                                </div>
                                                <div v-else>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- * END OF POST -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
</main>
<footer>
</footer>
        <!-- * LOGIN / SIGNUP MODAL -->
        <div class="modal fade" id="loginModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="bs-example bs-example-tabs">
                        <ul id="myTab" class="nav nav-pills">
                            <li id="loginTab" class="tab-design"><a href="#login" data-toggle="tab"
                                    class="active"><span></span> Log In <span></span></a></li>
                            <li id="signupTab" class=" tab-design"><a href="#signup" data-toggle="tab">Sign Up</a></li>
                        </ul>
                    </div>
                    <div class="modal-body">
                        <div id="myTabContent" class="tab-content">
                            <div class="tab-pane active" id="login">
                                <form class="form-horizontal" action="/login" method="POST" id="loginForm">
                                    <div class="input-container">
                                        <label class="label">Username</label>
                                        <input id="logUsername" class="form-control" type="text" name="username">
                                    </div>
                                    <div class="input-container">
                                        <label class="label">Password</label>
                                        <input id="logPassword" class="form-control" type="password" name="password">
                                    </div>
                                    <button class="btn btn-white">Login</button>
                                </form>
                            </div>
                            <div class="tab-pane" id="signup">
                                <form class="form-horizontal" action="/signup" method="POST" id="signupForm">
                                    <div class="input-container">
                                        <label class="label">Username</label>
                                        <input id="addUsername" class="form-control" type="text" name="username">
                                    </div>
                                    <div class="input-container">
                                        <label class="label">Email</label>
                                        <input id="addEmail" class="form-control" type="email" name="email">
                                    </div>
                                    <div class="input-container">
                                        <label class="label">Full Name</label>
                                        <input id="addName" class="form-control" type="text" name="name">
                                    </div>
                                    <div class="input-container">
                                        <label class="label">Password</label>
                                        <input id="addPassword" class="form-control" type="password" name="password">
                                    </div>
                                    <button class="btn btn-white">Sign Up</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- END OF LOGIN / SIGNUP MODAL -->
        <!-- USER ACTIONS MODAL -->
        <div class="modal fade" id="actionModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header align-items-center">
                        <p class="modal-title">Modifying user <span>&#62; &#62;</span></p>
                        <p><span id="spanUsername"></span></p>
                    </div>
                    <div class="modal-body">
                        <div>
                            <form class="form-horizontal" id="actionForm">

                                <div class="input-container">
                                    <label class="label">Username</label>
                                    <input id="username" class="form-control" type="text" name="username">
                                </div>
                                <div class="input-container">
                                    <label class="label">Email</label>
                                    <input id="email" class="form-control" type="email" name="email">
                                </div>
                                <div class="input-container">
                                    <label class="label">Name</label>
                                    <input id="name" class="form-control" type="text" name="name">
                                </div>
                                <div class="input-container">
                                    <label class="label">Status</label>
                                    <select name="status" class="form-control" id="status">
                                        <option value="Active">Active</option>
                                        <option value="Suspended">Suspended</option>
                                    </select>
                                </div>
                                <div class="input-container form-group">
                                    <label class="label " for="userType">Chose a type: </label>
                                    <select name="userType" class="form-control" id="userType">
                                        <option value="Consumer">Consumer</option>
                                        <option value="Contributor">Contributor</option>
                                        <option value="Super Admin">Super Admin</option>
                                    </select>
                                </div>
                                <button type="button" class="btn btn-white" v-on:click="updateUser()">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.js"></script>
    <script src="/js/AllVue.js"></script>
    <script src="/js/validation.js"></script>
</body>

</html>
<script>

</script>
